---
title: "GitHub Pages + Hugo で躓いた話"
date: 2018-04-29T00:32:25+09:00
tags: [ "hugo" ]
categories: [ "悪戦苦闘記" ]
description: "苦労したっていいじゃない，完成したんだもの"
draft: false
---

## 同じ鐵を踏まないように
[前回エントリ(link)]({{< ref "start-hugo.md" >}})で *GitHub Pages + Hugo* による HP
開設の話をしました． 

私は OSS を自分で設定したり動かしたりすることは好きなのですが，ドキュメント内の目的箇所
を特定するまでに時間がかかったり，大前提な部分を読み飛ばしたりなどのうっかりをやりがちです．

> **このエントリは，私が GitHub Pages と Hugo を使って HP を開設するまでに躓いたことたちを供養する**ためのものです．

私は*できるひとたちの成功までに直面した失敗と，その解決までの過程*みたいなものに興味があるので，自分もなるべくそれらを残すようにしようと思っています．どんな人もしょうもないことで詰まったりするんだって話が聞けるとなんだかホッとするじゃないですか．

## 1. function "default" not defined
```
 function "default" not defined
```
ローカル環境でサイトを生成して手元で確認するときに `hugo server -wD server` を実行しますが，その際に Hugo が吐く go のエラーです．
[ドキュメント](https://gohugo.io/functions/default/)を読むとわかるんですが，Hugo には `default` という function が用意されています．
用意されているのに未定義だと怒られるということはおそらく当時 APT で入れた Hugo のバージョンが低いのでしょう．GitHub から Hugo の最新版をクローンして使ってみたら解決されました．

`default` の使い方は以下のように，`Params.seo_title` に値が設定されていない場合はデフォルトである `.Title` が HTML の title タグに入るというふうです．
``` golang
<title>{{ .Params.seo_title | default .Title }}</title>
```
他のサイトジェネレータでも同じことだと思いますが，Hugo はサイトやページのタイトルやタグなどを `Value` として設定します．
ユーザが設定するサイトの baseurl やタイトルなどは `config.toml` に設定します．

また，テーマ側の layout 以下とトップディレクトリの `layout/` 以下に同名ファイル（e.g., `header.html`）が存在する場合はトップディレクトリの `layout/` のファイルが優先（オーバーライド）されます．これを利用して既存テーマを改造します．

